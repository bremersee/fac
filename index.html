<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia Site Renderer 1.6 at 2016-11-27 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Bremersee Failed Access Counter &#x2013; </title>
    <style type="text/css" media="all">
      @import url("./css/maven-base.css");
      @import url("./css/maven-theme.css");
      @import url("./css/site.css");
    </style>
    <link rel="stylesheet" href="./css/print.css" type="text/css" media="print" />
    <meta name="Date-Revision-yyyymmdd" content="20161127" />
    <meta http-equiv="Content-Language" content="en" />
        
        </head>
  <body class="composite">
    <div id="banner">
                    <div id="bannerLeft">
                Bremersee Failed Access Counter
                </div>
                    <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
            
                    
                <div class="xleft">
        <span id="publishDate">Last Published: 2016-11-27</span>
                  &nbsp;| <span id="projectVersion">Version: 1.1.0-SNAPSHOT</span>
                      </div>
            <div class="xright">        
                    
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
             
                    
                                <h5>Project Documentation</h5>
                  <ul>
                                                                                                                                                                                                                                                                                                                        <li class="expanded">
                          <a href="project-info.html" title="Project Information">Project Information</a>
                    <ul>
                      <li class="none">
                          <a href="dependencies.html" title="Dependencies">Dependencies</a>
            </li>
                      <li class="none">
                          <a href="dependency-convergence.html" title="Dependency Convergence">Dependency Convergence</a>
            </li>
                      <li class="none">
                          <a href="dependency-info.html" title="Dependency Information">Dependency Information</a>
            </li>
                      <li class="none">
                          <a href="dependency-management.html" title="Dependency Management">Dependency Management</a>
            </li>
                      <li class="none">
                          <a href="distribution-management.html" title="Distribution Management">Distribution Management</a>
            </li>
                      <li class="none">
            <strong>About</strong>
          </li>
                      <li class="none">
                          <a href="issue-tracking.html" title="Issue Tracking">Issue Tracking</a>
            </li>
                      <li class="none">
                          <a href="license.html" title="Project License">Project License</a>
            </li>
                      <li class="none">
                          <a href="modules.html" title="Project Modules">Project Modules</a>
            </li>
                      <li class="none">
                          <a href="plugin-management.html" title="Plugin Management">Plugin Management</a>
            </li>
                      <li class="none">
                          <a href="plugins.html" title="Project Plugins">Project Plugins</a>
            </li>
                      <li class="none">
                          <a href="team-list.html" title="Project Team">Project Team</a>
            </li>
                      <li class="none">
                          <a href="source-repository.html" title="Source Repository">Source Repository</a>
            </li>
                      <li class="none">
                          <a href="project-summary.html" title="Project Summary">Project Summary</a>
            </li>
              </ul>
        </li>
                                                                                                                                            <li class="collapsed">
                          <a href="project-reports.html" title="Project Reports">Project Reports</a>
                  </li>
          </ul>
                       <h5>Modules</h5>
                  <ul>
                  <li class="none">
                          <a href="bremersee-fac-api/index.html" title="bremersee-fac-api">bremersee-fac-api</a>
            </li>
                  <li class="none">
                          <a href="bremersee-fac-data-jpa/index.html" title="bremersee-fac-data-jpa">bremersee-fac-data-jpa</a>
            </li>
                  <li class="none">
                          <a href="bremersee-fac-data-ldap/index.html" title="bremersee-fac-data-ldap">bremersee-fac-data-ldap</a>
            </li>
                  <li class="none">
                          <a href="bremersee-fac-data-mongodb/index.html" title="bremersee-fac-data-mongodb">bremersee-fac-data-mongodb</a>
            </li>
          </ul>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                   
                    
            </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <div class="section">
<h2><a name="Bremersee_Failed_Access_Counter"></a>Bremersee Failed Access Counter</h2>
<p>This project contains a small protection against brute-force-attacks.</p>
<p>A failed access counter stores failed access entries of a resource for a remote host, that wants to access the resource. The resource may be, for example, the login page. When the login has failed, this may be stored in the failed access counter. When the counter of the failed access entry has reached a threshold the login can be blocked for a while.</p>
<p>The failed access counter needs a DAO (interface FailedAccessDao) to persist the failed access entries. Currently there are three DAO implementations available (see package org.bremersee.fac.domain):</p>
<ul>
<li>FailedAccessInMemoryDao: Persists the entries in memory.</li>
<li>FailedAccessJpaDao: Persists the entries in a database.</li>
<li>FailedAccessLdapDao: Persists the entries in a LDAP server.</li></ul>
<div class="section">
<h3><a name="Configuration_in_a_Spring_environment"></a>Configuration (in a Spring environment)</h3>
<p>To configure a failed access counter just create a bean, set the DAO and the properties that match your requirements:</p>
<div class="source">
<pre>@Configuration
public class FacConfig {

    @Bean
    public FailedAccessCounter failedAccessCounter() {
        FailedAccessCounterImpl fac = new FailedAccessCounterImpl();
        
        // set the properties (these are the default values):
        fac.setFailedAccessCounterThreshold(5);
        fac.setRemoveFailedAccessEntriesAfterMillis(1000L * 60L * 60L * 23L);
        fac.setRemoveFailedEntriesInterval(1000L * 60L * 60L);
        
        // set the DAO:
        fac.setFailedAccessDao(failedAccessDao());
        return fac;
    }
    
    @Bean
    public FailedAccessDao failedAccessDao() {
        FailedAccessInMemoryDao dao = new FailedAccessInMemoryDao();
        return dao;
    }
}</pre></div>
<div class="section">
<h4><a name="Configuration_of_the_FailedAccessJpaDao"></a>Configuration of the FailedAccessJpaDao</h4>
<p>The configuration of the the data source, entity manager etc. is skipped here.</p>
<div class="source">
<pre>@Configuration
@EntityScan(basePackages = {&quot;org.bremersee.fac.domain&quot;})
public class FacConfig {

    @Bean
    public FailedAccessCounter failedAccessCounter() {
        FailedAccessCounterImpl fac = new FailedAccessCounterImpl();
        fac.setFailedAccessDao(failedAccessDao());
        return fac;
    }
    
    @Bean
    public FailedAccessDao failedAccessDao() {
        FailedAccessJpaDao dao = new FailedAccessJpaDao();
        return dao;
    }
}</pre></div></div>
<div class="section">
<h4><a name="Configuration_of_the_FailedAccessLdapDao"></a>Configuration of the FailedAccessLdapDao</h4>
<p>The FailedAccessLdapDao uses the ldaptive library (<a class="externalLink" href="http://www.ldaptive.org/">http://www.ldaptive.org/</a>) to access the LDAP server. The configuration of the connection factory is skipped here. See the documentation at ldaptive.org.</p>
<p>A LDAP schema of the failed access entries can be download <a class="externalLink" href="http://bremersee.github.io/ldapschemas/bremersee-fac.schema">here</a>.</p>
<div class="source">
<pre>@Configuration
public class FacConfig {

    @Bean
    public FailedAccessCounter failedAccessCounter() {
        FailedAccessCounterImpl fac = new FailedAccessCounterImpl();
        fac.setFailedAccessDao(failedAccessDao());
        return fac;
    }
    
    @Bean
    public FailedAccessDao failedAccessDao() {
        FailedAccessLdapDao dao = new FailedAccessLdapDao();
        dao.setFailedAccessLdapMapper(failedAccessLdapMapper());
        dao.setSearchRequest(searchRequest());
        dao.setConnectionFactory(connectionFactory());
        return dao;
    }

    @Bean
    public FailedAccessLdapMapper failedAccessLdapMapper() {
        FailedAccessDefaultLdapMapper mapper = new FailedAccessDefaultLdapMapper();
        // configure the mapper if you don't use the bremersee-fac.schema
        // or use your own implementation
        return mapper;
    }

    @Bean
    public SearchRequest searchRequest() {
        SearchRequest searchRequest = new SearchRequest();
        searchRequest.setBaseDn(&quot;ou=Access Failed Entries,dc=example,dc=org&quot;);
        return searchRequest;
    }
    
    @Bean
    public ConnectionFactory connectionFactory() {
        
        DefaultConnectionFactory factory = new DefaultConnectionFactory();
        // configure the connection factory
        return factory;
    }
}</pre></div></div></div></div>
      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
              Copyright &#169;                    2016
                        <a href="http://bremersee.org">bremersee.org</a>.
            All rights reserved.      
                    
                  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
